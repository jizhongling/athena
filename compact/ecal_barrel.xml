<lccdd>

    <display>
    <vis name="EcalBarrelEnvelope_vis" alpha="0.9" r="0.99" g="0.5" b="0" showDaughters="true" visible="false" />
    <vis name="EcalBarrelStave_vis"    alpha="0.9" r="0.99" g="0.5" b="0" showDaughters="true" visible="false" />
    </display>
  <define>
    <comment>
      ---------------------------------------
      EM Calorimeter Parameters with AstroPix
      ---------------------------------------
    </comment>
    <constant name="EcalBarrel_Support_thickness"    value="5*cm"/>
    <constant name="EcalBarrel_SiliconThickness"     value="500*um"/>
    <constant name="EcalBarrel_ElectronicsThickness" value="150*um"/>
    <constant name="EcalBarrel_CopperThickness"      value="100*um"/>
    <constant name="EcalBarrel_KaptonThickness"      value="200*um"/>
    <constant name="EcalBarrel_EpoxyThickness"       value="100*um"/>
    <constant name="EcalBarrel_CarbonThickness"      value="0.5*mm"/>
    <constant name="EcalBarrel_CarbonSpacerWidth"    value="4*mm"/>
    <constant name="EcalBarrel_LayerSpacing"         value="10.0*mm"/>
    <constant name="EcalBarrel_TungstenThickness"    value="4.0*mm"/>
    <constant name="EcalBarrel_ModRepeat"            value="CaloSides"/> 
    <constant name="EcalBarrel_ModLength"            value="0.5*m"/>
    <constant name="EcalBarrel_ModWidth"             value="0.5*m"/>
    <constant name="EcalBarrel_AvailThickness"       value="EcalBarrel_TotalThickness-EcalBarrel_Support_thickness"/>
    <constant name="EcalBarrel_ReadoutLayerThickness"
      value="EcalBarrel_SiliconThickness
      + EcalBarrel_ElectronicsThickness
      + EcalBarrel_CopperThickness
      + EcalBarrel_KaptonThickness
      + EcalBarrel_EpoxyThickness
      + EcalBarrel_CarbonThickness
      + EcalBarrel_LayerSpacing"/>
    <constant name="EcalBarrel_ReadoutLayerNumber" value="floor(EcalBarrel_AvailThickness/EcalBarrel_ReadoutLayerThickness)"/>
    <constant name="EcalBarrelLayers_nMax"  value="20"/>
  </define>

  <limits>
  </limits>

  <regions>
  </regions>

  <display>
  </display>

  <detectors>

    <comment>
      ---------------------
      Barrel EM Calorimeter
      ---------------------
      A layered EM calorimeter with tungsten and silicon (AstroPix)
    </comment>
    <detector
      id="ECalBarrel_ID"
      name="EcalBarrel"
      type="athena_EcalBarrel"
      readout="EcalBarrelHits"
      calorimeterType="EM_BARREL"
      vis="EcalBarrelEnvelope_vis"
      offset="EcalBarrel_offset">
      <dimensions numsides="EcalBarrel_ModRepeat" 
        rmin="EcalBarrel_rmin" 
        z="EcalBarrel_length"/>
      <staves vis="EcalBarrelStave_vis">
        <support inside="true"  material="Aluminum" vis="AnlOrange"
          thickness="EcalBarrel_Support_thickness"
          n_beams="3" grid_size="25.0*cm" >
        </support>
      </staves>
      <layer repeat="EcalBarrel_ReadoutLayerNumber" vis="AnlBlue">
        <slice material="Silicon" thickness="EcalBarrel_SiliconThickness" sensitive="yes" limits="cal_limits" vis="AnlGray"/>
        <slice material="Silicon" thickness="EcalBarrel_ElectronicsThickness" vis="AnlGold"/>
        <slice material="Copper" thickness="EcalBarrel_CopperThickness" vis="AnlGray"/>
        <slice material="Kapton" thickness="EcalBarrel_KaptonThickness" vis="AnlGold"/>
        <slice material="Epoxy" thickness="EcalBarrel_EpoxyThickness" vis="AnlGray"/>
        <slice material="CarbonFiber" thickness="EcalBarrel_CarbonThickness" vis="AnlGold"/>
        <slice material="TungstenDens24" thickness="EcalBarrel_TungstenThickness" vis="AnlGray"/>
        <slice material="Air" thickness="EcalBarrel_LayerSpacing - EcalBarrel_TungstenThickness" vis="AnlGold"/>
      </layer>
    </detector>
  </detectors>

  <readouts>
    <readout name="EcalBarrelHits">
      <segmentation type="CartesianGridXY" grid_size_x="0.5 * mm" grid_size_y="0.5 * mm"/>
      <id>system:8,barrel:3,module:4,layer:10,slice:5,x:32:-16,y:-16</id>
    </readout>
  </readouts>


</lccdd>
